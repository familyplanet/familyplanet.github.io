var _,h,Operator={el:{},setEl:function(){var e=this;e.el.didResize=null,e.el.windowWidth=$(window).width(),e.el.windowHeight=$(window).height(),e.el.initZIndex=2,e.el.heroSection=$(".hero-section"),e.el.footerSection=$(".footer-section"),e.el.mobileNavbar=$("#mobile-navbar"),e.el.mobileCarouselWrapper=$("#homepage-mobile-collage"),e.el.desktopCarouselWrapper=$("#homepage-desktop-collage"),e.el.mobileCollageElements=$("#homepage-mobile-collage li"),e.el.desktopCollageElements=$("#homepage-desktop-collage li"),e.el.initialActiveCollageElement=$("#homepage-desktop-collage li[data-index=9]"),e.el.collageAutoInterval=null,e.el.carouselWrapper=$("#home-carousel"),e.el.initialResize=!0,e.el.loadInitialElement=!0,e.el.isMobile=!0,e.el.faqNavbar=$("#faq-navbar"),e.el.jobsNavbar=$("#jobs-navbar"),e.el.jobOpeningsSection=$(".job-openings-section"),e.el.jobsWorkLifeSection=$(".work-life-section"),e.el.columns3=628,e.el.columns4=836,e.el.columns5=1044,e.el.columns6=1252,e.el.columns7=1460,e.el.columns8=1668,e.el.numCols=0,e.el.surrounding=[],e.el.animationDirection=[0,0]},init:function(){var e=this;_=e.el,h=e.helpers,e.events()},events:function(){var e=this;$(document).ready(function(){e.setEl()}),$(window).on("load",function(){h.determineIfIsMobile(),h.adjustHeroImageHeight(),$("body").hasClass("home-page")&&(e.homeCarousel.init(),e.homeHeroMessages()),h.checkAppModalHash(),h.checkJobsModalHash(),e.phoneInputField.init(),e.scrollingLinks.init(),e.jobsCarousel.init(),e.jobsModal(),e.businessForm(),$(window).on("resize",function(){_.didResize=!0}).resize(),setInterval(function(){_.didResize&&(h.hasResized(),_.didResize=!1)},500)}),$(window).bind("keyup",function(e){27==e.keyCode&&$(".modal").modal("hide")})},helpers:{checkAppModalHash:function(){"#gettheapp"===window.location.hash.toLowerCase()&&$("#getAppModal").modal("toggle")},checkJobsModalHash:function(){if($("body").hasClass("jobs-page")&&window.location.hash){var e=window.location.hash.substring(1).split("-");2===e.length&&($("#jobsModal").modal(),Operator.populateJobsModal(e[0],e[1]))}},getQueryVariable:function(e){for(var t=window.location.search.substring(1),o=t.split("&"),i=0;i<o.length;i++){var s=o[i].split("=");if(s[0]===e)return s[1]}return null},isElementInViewport:function(e,t){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),t=t||0;var o=e.getBoundingClientRect();return o.top<=window.innerHeight-t},hasResized:function(){_.windowWidth=$(window).width(),_.windowHeight=$(window).height(),h.setAffixPositions(),h.determineIfIsMobile(),h.adjustHeroImageHeight(),Operator.homeCollage.init(),Operator.homeCarousel.positionIndicators()},adjustHeroImageHeight:function(){!_.isMobile&&_.windowHeight<800?_.heroSection.css("height",_.windowHeight-20):_.heroSection.css("height","")},setAffixPositions:function(){$("body").hasClass("faq-page")&&_.faqNavbar.affix({offset:{top:_.heroSection.outerHeight(!0)-70,bottom:_.footerSection.outerHeight(!0)}}),$("body").hasClass("jobs-page")&&_.jobsNavbar.affix({offset:{top:_.jobOpeningsSection.offset().top-140,bottom:_.footerSection.outerHeight(!0)+_.jobsWorkLifeSection.outerHeight(!0)}}),_.mobileNavbar.affix({offset:{top:70,bottom:_.footerSection.outerHeight(!0)}})},determineIfIsMobile:function(){_.windowWidth>768?_.isMobile=!1:_.isMobile=!0}},homeCollage:{determineNumCols:function(){_.windowWidth<_.columns3?_.numCols=2:_.windowWidth>=_.columns3&&_.windowWidth<_.columns4?_.numCols=3:_.windowWidth>=_.columns4&&_.windowWidth<_.columns5?_.numCols=4:_.windowWidth>=_.columns5&&_.windowWidth<_.columns6?_.numCols=5:_.windowWidth>=_.columns6&&_.windowWidth<_.columns7?_.numCols=6:_.windowWidth>=_.columns7&&_.windowWidth<_.columns8?_.numCols=7:_.windowWidth>=_.columns8&&(_.numCols=8)},determineSurrounding:function(e,t){_.surrounding=[],e=Number(e),e===4*t-1?(_.surrounding=[e-1,e-t,e-(t+1)],_.animationDirection=[100,100]):e%t===t-1?(_.surrounding=[e-1,e+(t-1),e+t],_.animationDirection=[100,0]):e>=3*t?(_.surrounding=[e+1,e-(t-1),e-t],_.animationDirection=[0,100]):(_.surrounding=[e+1,e+t,e+(t+1)],_.animationDirection=[0,0])},randomizeInitialCard:function(){var e=this,t=_.initialActiveCollageElement[0].dataset.index,o=-1;for(e.determineNumCols(),o=Math.floor(4*Math.random()*_.numCols);o==t;)o=Math.floor(4*Math.random()*_.numCols);t=o,_.initialActiveCollageElement=$("#homepage-desktop-collage li[data-index="+t+"]")},setRandomCollageElement:function(){Operator.homeCollage.randomizeInitialCard(),Operator.homeCollage.activateAndFade(_.initialActiveCollageElement,_.initialActiveCollageElement[0].dataset.index,_.numCols)},activateAndFade:function(e,t,o){var i=this;i.determineSurrounding(t,o),_.initZIndex+=1,$(e).css("z-index",_.initZIndex),$(e).hasClass("active")?($(".collage-content",e).css({left:"0",top:"0"}),$(e).removeClass("active"),_.desktopCollageElements.removeClass("active fade")):($(".collage-content",_.desktopCollageElements).css({left:"0",top:"0"}),_.desktopCollageElements.removeClass("active"),_.desktopCollageElements.removeClass("fade"),_.surrounding.forEach(function(e){$("#homepage-desktop-collage li[data-index='"+e+"']").addClass("fade")}),$(".collage-content",e).css({left:-1.02*_.animationDirection[0]+"%",top:-1.02*_.animationDirection[1]+"%"}),$(e).addClass("active"))},setupMobileCollage:function(){_.mobileCollageElements.hasClass("active")||$("#homepage-mobile-collage li[data-index=9]").addClass("active"),_.mobileCarouselWrapper.carousel("cycle"),$(".item",_.mobileCarouselWrapper).each(function(){var e=$(this).next();$(this).children(".collage-content").length>2||(e.length||(e=$(this).siblings(":first")),e.children(":first-child").clone().appendTo($(this)),e.next().length>0?e.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this)))}),_.mobileCarouselWrapper.swiperight(function(){$(this).carousel("prev")}),_.mobileCarouselWrapper.swipeleft(function(){$(this).carousel("next")})},setupDesktopCollage:function(){var e=this;e.determineNumCols(),_.loadInitialElement&&(e.setRandomCollageElement(),_.collageAutoInterval=window.setInterval(e.setRandomCollageElement,1e4),_.loadInitialElement=!1),_.desktopCollageElements.click(function(){_.isMobile||(_.collageAutoInterval&&(clearInterval(_.collageAutoInterval),_.collageAutoInterval=null),e.activateAndFade(this,this.dataset.index,_.numCols))})},resetDesktopCollage:function(){var e=this;e.determineNumCols(),$(".collage-content",_.desktopCarouselWrapper).removeAttr("style"),_.desktopCollageElements.removeClass("active fade")},init:function(){var e=this;$("body").hasClass("home-page")&&(_.isMobile?e.setupMobileCollage():(_.mobileCarouselWrapper.carousel("pause"),_.initialResize?e.setupDesktopCollage():e.resetDesktopCollage(),_.initialResize=!1))}},homeCarousel:{hasStarted:!1,timers:{timer1:null,timer2:null,timer3:null,timer4:null},events:function(){var e=this;_.carouselWrapper.swiperight(function(){e.cycleBackwards()}),_.carouselWrapper.swipeleft(function(){e.cycleForwards()}),$("#home-carousel-indicators").swiperight(function(){e.cycleBackwards()}),$("#home-carousel-indicators").swipeleft(function(){e.cycleForwards()}),$(".carousel-control").on("click",function(){_.carouselWrapper.carousel("pause")}),$("#home-carousel-indicators li").on("click",function(){_.isMobile||$("body").scrollTo(".home-carousel-indicators",{duration:500,easing:"swing",offset:-88}),e.stop(),$("#home-carousel-indicators li.active").removeClass("active"),$(this).addClass("active"),_.carouselWrapper.carousel("pause"),e.start()}),_.carouselWrapper.on("slid.bs.carousel",function(){e.stop(),$("#home-carousel-indicators li.active").removeClass("active");var t=$("div.active").index("div.item");$('#home-carousel-indicators li[data-slide-to="'+t+'"]').addClass("active"),e.positionIndicators(),e.start()}),$(window).on("DOMContentLoaded load resize scroll",function(){e.hasStarted||h.isElementInViewport($("#home-carousel"),200)&&(e.hasStarted=!0,e.start(),e.positionIndicators(),_.carouselWrapper.carousel("cycle"))})},start:function(){var e=this;e.timers.timer1=setTimeout(function(){$(".active",_.carouselWrapper).addClass("state1"),e.timers.timer2=setTimeout(function(){$(".active",_.carouselWrapper).addClass("state2"),e.timers.timer3=setTimeout(function(){$(".active",_.carouselWrapper).addClass("state3"),e.timers.timer4=setTimeout(function(){$(".active",_.carouselWrapper).addClass("state4")},3500)},2500)},2500)},1e3)},stop:function(){var e=this;$(".home-carousel .carousel-inner .item").removeClass("state1 state2 state3 state4"),clearTimeout(e.timers.timer1),clearTimeout(e.timers.timer2),clearTimeout(e.timers.timer3),clearTimeout(e.timers.timer4),e.timers.timer1=null,e.timers.timer2=null,e.timers.timer3=null,e.timers.timer4=null},cycleBackwards:function(){this.stop(),_.carouselWrapper.carousel("prev"),_.carouselWrapper.carousel("pause"),this.start()},cycleForwards:function(){this.stop(),_.carouselWrapper.carousel("next"),_.carouselWrapper.carousel("pause"),this.start()},positionIndicators:function(){if($("body").hasClass("home-page"))if(_.windowWidth<480){var e=$("#home-carousel-indicators .active").position().left,t=$("#home-carousel-indicators .active").outerWidth(),o=$("div.active").index("div.item"),i=_.windowWidth/2-t/2-e,s=0;switch(o){case 0:s=i-100;break;case 1:s=i-50;break;case 2:case 3:s=i;break;case 4:s=i+50;break;case 5:s=i+100}$("#home-carousel-indicators").css("left",s)}else $("#home-carousel-indicators").css("left",0)},init:function(){var e=this;e.events()}},homeHeroMessages:function(){var e=$(".homepage-hero--anim-wrapper"),t=$(".anim-img2"),o=$(".anim-img3"),i=$(".anim-img4");$("body").hasClass("home-page")&&_.windowWidth>992&&(t.show(),o.show(),i.show(),setTimeout(function(){e.addClass("state1"),setTimeout(function(){e.addClass("state2"),setTimeout(function(){e.addClass("state3"),setTimeout(function(){e.addClass("state4")},1500)},500)},2500)},1500))},phoneInputField:{el:{},setEl:function(){var e=this;e.el.proposedChangeIsInvalidChar=null,e.el.changeWillComplete=null,e.el.fieldIsComplete=null,e.el.hasDeletedChar=null,e.el.headerInput=document.getElementById("phoneNumberDownloadInput-hero"),e.el.footerInput=document.getElementById("phoneNumberDownloadInput-footer"),e.el.modalInput=document.getElementById("phoneNumberDownloadInput-modal"),e.el.businessInput=document.getElementById("phoneNumberInput"),e.el.inviteInput=document.getElementById("phoneNumberDownloadInput-invite")},submitPhoneNumberField:function(e){var t=this,o={phone:e[0].value},i=Operator.helpers.getQueryVariable("user_id");null!=i&&(o.user_id=i),t.el.fieldIsComplete?($.post(BASE_URL+"send_download_link",o,function(){setTimeout(function(){$("body").scrollTo("#on-demand-section",{duration:500,easing:"swing",offset:_.isMobile?-70:-140})},3e3)}).fail(function(){e.closest(".form-group").addClass("has-error").removeClass("has-success"),e.siblings(".form-messages").text("Something went wrong, please try again.")}),e.closest(".form-group").addClass("has-success").removeClass("has-error"),e.siblings(".form-messages").html("Hooray! We sent you a download link to <b>"+e[0].value+"</b>")):(e.closest(".form-group").addClass("has-error").removeClass("has-success"),e.siblings(".form-messages").text("That doesn't seem to be a valid U.S. number."))},init:function(){function e(){FieldKit.PhoneFormatter.apply(this,arguments)}var t=this;t.setEl(),e.prototype=Object.create(FieldKit.PhoneFormatter.prototype),e.prototype.guessFormatFromText=function(e){this.delimiterMap={0:"(",4:")",5:" ",9:"-"},this.maximumLength=14},e.prototype.isChangeValid=function(e,o){return 0===e.proposed.text.indexOf("+")?!1:(t.el.proposedChangeIsInvalidChar=e.proposed.text.match(/[^0-9\(\)\s\-]/),t.el.changeWillComplete=e.proposed.selectedRange.start>=14&&e.proposed.text.match(/\d/g).length>=10,t.el.fieldIsComplete=e.current.selectedRange.start>=14,t.el.hasDeletedChar=0!==e.deleted.text.length,t.el.proposedChangeIsInvalidChar&&!t.el.fieldIsComplete?(e.field.element.parentElement.classList.add("has-error"),$(".form-messages").text("Please enter a valid phone number.")):(e.field.element.parentElement.classList.remove("has-error"),e.field.element.parentElement.classList.remove("has-success"),$(".form-messages").text("")),t.el.fieldIsComplete&&!t.el.hasDeletedChar?(e.field.element.parentElement.classList.add("success-done-editing"),e.field.element.parentElement.classList.remove("has-error"),e.field.element.parentElement.classList.remove("has-success")):t.el.changeWillComplete&&!t.el.proposedChangeIsInvalidChar?(t.el.fieldIsComplete=!0,e.field.element.parentElement.classList.add("success-done-editing"),e.field.element.parentElement.classList.remove("has-error"),e.field.element.parentElement.classList.remove("has-success")):(t.el.fieldIsComplete=!1,e.field.element.parentElement.classList.remove("success-done-editing")),FieldKit.PhoneFormatter.prototype.isChangeValid.apply(this,arguments))},t.el.headerInput&&new FieldKit.TextField(t.el.headerInput,new e),$(t.el.headerInput).parentsUntil(".download-app-form").keypress(function(e){13==e.keyCode&&(e.preventDefault(),t.submitPhoneNumberField($(t.el.headerInput)))}),$(t.el.headerInput).next(".success-get-app-button").click(function(e){e.preventDefault(),t.submitPhoneNumberField($(t.el.headerInput))}),t.el.footerInput&&new FieldKit.TextField(t.el.footerInput,new e),$(t.el.footerInput).parentsUntil(".download-app-form").keypress(function(e){13==e.keyCode&&(e.preventDefault(),t.submitPhoneNumberField($(t.el.footerInput)))}),$(t.el.footerInput).next(".success-get-app-button").click(function(e){e.preventDefault(),t.submitPhoneNumberField($(t.el.footerInput))}),t.el.modalInput&&new FieldKit.TextField(t.el.modalInput,new e),$(t.el.modalInput).parentsUntil(".download-app-form").keypress(function(e){13==e.keyCode&&(e.preventDefault(),t.submitPhoneNumberField($(t.el.modalInput)))}),$(t.el.modalInput).next(".success-get-app-button").click(function(e){e.preventDefault(),t.submitPhoneNumberField($(t.el.modalInput))}),t.el.inviteInput&&new FieldKit.TextField(t.el.inviteInput,new e),$(t.el.inviteInput).parentsUntil(".download-app-form").keypress(function(e){13==e.keyCode&&(e.preventDefault(),t.submitPhoneNumberField($(t.el.inviteInput)))}),$(t.el.inviteInput).next(".success-get-app-button").click(function(e){e.preventDefault(),t.submitPhoneNumberField($(t.el.inviteInput))}),t.el.businessInput&&new FieldKit.TextField(t.el.businessInput,new FieldKit.PhoneFormatter)}},businessForm:function(){$(".businesses-form").submit(function(e){e.preventDefault();var t=[];$(".businesses-form .form-group.has-error").removeClass("has-error"),t=$(this).find("input, select").filter(function(){return""===this.value||"0"===this.value}),t.length?$.each(t,function(){$(this).closest(".form-group").addClass("has-error")}):($.post(BASE_URL+"register/business",{company:$("#companyNameInput").val(),industry:$("#industryInput").val(),employees:$("#numEmployeesInput").val(),name:$("#nameInput").val(),phone:$("#phoneNumberInput").val(),email:$("#emailAddressInput").val()}).fail(function(){$(".business-form-success").removeClass("active"),$(".business-form-failure").addClass("active")}),$("body").scrollTo("#operator-for-business-section",{duration:500,easing:"swing",offset:_.isMobile?0:-70}),$(".business-form-failure").removeClass("active"),$(".business-form-success").addClass("active"),$(".form-group.has-error").removeClass("has-error"))})},scrollingLinks:{scrollHelper:function(e,t,o){e.preventDefault(),o=o||{},$("body").scrollTo(t,{duration:o.duration||500,easing:o.easing||"swing",offset:o.offset||-140})},init:function(){var e=this;$(".swipe-to-learn").click(function(t){e.scrollHelper(t,"#on-demand-section",{offset:_.isMobile?-70:0})}),$("#businesses-get-started-link").click(function(t){e.scrollHelper(t,"#operator-for-business-section",{offset:_.isMobile?70:-70})}),$("#jobs-join-link").click(function(t){e.scrollHelper(t,"#job-openings-section",{offset:_.isMobile?-70:0})}),$("#faq-answers-link").click(function(t){e.scrollHelper(t,"#faq-section",{offset:_.isMobile?-70:0})}),$("#faq-general-link").click(function(t){e.scrollHelper(t,"#general",{offset:-100})}),$("#faq-purchases-link").click(function(t){e.scrollHelper(t,"#purchases",{offset:-100})}),$("#faq-company-link").click(function(t){e.scrollHelper(t,"#company",{offset:-100})}),$("#faq-partners-link").click(function(t){e.scrollHelper(t,"#partners",{offset:-100})}),$("#jobs-engineering-link").click(function(t){e.scrollHelper(t,"#engineering",{offset:-100})}),$("#jobs-design-link").click(function(t){e.scrollHelper(t,"#design",{offset:-100})}),$("#jobs-business-link").click(function(t){e.scrollHelper(t,"#business",{offset:-100})}),$("#jobs-operations-link").click(function(t){e.scrollHelper(t,"#operations",{offset:-100})})}},jobsModal:function(){$("#jobsModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),o=t.data("categoryIndex"),i=t.data("positionIndex");Operator.populateJobsModal(o,i)}),$("#jobsModal").on("hidden.bs.modal",function(e){history.pushState("",document.title,window.location.pathname)})},populateJobsModal:function(e,t){var o=JSON.parse($("#jobsJson").text());if(o.hasOwnProperty(e)&&o[e].positions.hasOwnProperty(t)){var i=o[e].positions[t],s=$("#jobsModal");window.location.hash=e+"-"+t,window.onhashchange=function(){location.hash||s.modal("hide")};var n=s.find(".modal-body");n.html("");var l=i.links;l.apply&&s.find(".jobs-link-apply").attr("href",l.apply);var a="https://twitter.com/intent/tweet?text=Want%20to%20build%20something%20awesome%3F%20Operator%20is%20hiring%20a%20TITLEPLACEHOLDER.%20http%3A//operator.com/jobs%23JOBSPLACEHOLDER%20%23AskOperator",r="http://www.facebook.com/sharer.php?u=https://operator.com",c="https://www.linkedin.com/shareArticle?url=http://operator.com/jobs%23JOBSPLACEHOLDER&title=Join%20Operator&summary=Want%20to%20build%20something%20awesome%3F%20Operator%20is%20hiring%20a%20TITLEPLACEHOLDER.%20http%3A//operator.com/jobs%23JOBSPLACEHOLDER%20%23AskOperator";s.find(".jobs-link-twitter").attr("href",a.replace("TITLEPLACEHOLDER",i.title.replace(" ","%20")).replace("JOBSPLACEHOLDER",e+"-"+t)),s.find(".jobs-link-facebook").attr("href",r),s.find(".jobs-link-linkedin").attr("href",c.replace("TITLEPLACEHOLDER",i.title.replace(" ","%20")).replace(/JOBSPLACEHOLDER/g,e+"-"+t)),s.find(".job-title").text(i.title);var d,u;if(i.text)for(var p=0;p<i.text.length;p++)d=i.text[p],n.append("<h6 class='section-label'>"+d.heading+"</h6><p>"+d.description+"</p>");if(i.lists)for(var m=0;m<i.lists.length;m++){u=i.lists[m],n.append("<h6 class='section-label'>"+u.title+"</h6><ul>");for(var h=0;h<u.items.length;h++)n.append("<li>"+u.items[h]+"</li>");n.append("</ul>")}}},jobsCarousel:{events:function(){$("#jobs-carousel").swiperight(function(){$(this).carousel("prev")}),$("#jobs-carousel").swipeleft(function(){$(this).carousel("next")})},init:function(){var e=this;$("body").hasClass("jobs-page")&&($("#jobs-carousel .item").each(function(){var e=$(this).next();e.length||(e=$(this).siblings(":first")),e.children(":first-child").clone().appendTo($(this)),e.next().length>0?e.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this))}),e.events())}}};$(document).ready(function(){Operator.init()});